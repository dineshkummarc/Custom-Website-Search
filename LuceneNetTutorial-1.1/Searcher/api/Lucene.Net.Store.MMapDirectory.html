<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html dir="LTR" xmlns:ndoc="urn:ndoc-schema"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta content="history" name="save" /><meta name="vs_targetSchema" content="http://schemas.microsoft.com/intellisense/ie5" /><title>MMapDirectory Class</title><xml></xml><link rel="stylesheet" type="text/css" href="MSDN.css" /></head><body id="bodyID" class="dtBODY"><script type="text/javascript">
    	window.onload = function() {
	    	var i = window.frames["iframe_navi"];
	    	i.syncTree(document.URL);
    	}
    </script><div id="navi"><iframe src="contents.html" id="iframe_navi" name="iframe_navi"></iframe></div><div id="nsbanner"><div id="bannerrow1"><table class="bannerparthead" cellspacing="0"><tr id="hdr"><td class="runninghead">Lucene.Net</td><td class="product"></td></tr></table></div><div id="TitleRow"><h1 class="dtH1">MMapDirectory Class</h1></div></div><div id="nstext">File-based <a href="Lucene.Net.Store.Directory.html">Directory</a> implementation that uses mmap for reading, and <a href="Lucene.Net.Store.SimpleFSDirectory.SimpleFSIndexOutput.html">SimpleFSDirectory.SimpleFSIndexOutput</a> for writing. <p xmlns="urn:ndoc-schema"></p><b xmlns="urn:ndoc-schema">NOTE</b>: memory mapping uses up a portion of the virtual memory address space in your process equal to the size of the file being mapped. Before using this class, be sure your have plenty of virtual address space, e.g. by using a 64 bit JRE, or a 32 bit JRE with indexes that are guaranteed to fit within the address space. On 32 bit platforms also consult <a href="Lucene.Net.Store.MMapDirectory.MaxChunkSize.html">MaxChunkSize</a> if you have problems with mmap failing because of fragmented address space. If you get an OutOfMemoryException, it is recommened to reduce the chunk size, until it works. <p xmlns="urn:ndoc-schema"></p>Due to <a href="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4724038" xmlns="urn:ndoc-schema"> this bug</a> in Sun's JRE, MMapDirectory's <a href="Lucene.Net.Store.IndexInput.Close.html">Close</a> is unable to close the underlying OS file handle. Only when GC finally collects the underlying objects, which could be quite some time later, will the file handle be closed. <p xmlns="urn:ndoc-schema"></p>This will consume additional transient disk usage: on Windows, attempts to delete or overwrite the files will result in an exception; on other platforms, which typically have a "delete on last close" semantics, while such operations will succeed, the bytes are still consuming space on disk. For many applications this limitation is not a problem (e.g. if you have plenty of disk space, and you don't rely on overwriting files on Windows) but it's still an important limitation to be aware of. <p xmlns="urn:ndoc-schema"></p>This class supplies the workaround mentioned in the bug report (disabled by default, see <a href="Lucene.Net.Store.MMapDirectory.UseUnmap.html">UseUnmap</a>), which may fail on non-Sun JVMs. It forcefully unmaps the buffer on close by using an undocumented internal cleanup functionality. <a href="Lucene.Net.Store.MMapDirectory.UNMAP_SUPPORTED.html">UNMAP_SUPPORTED</a> is <code>true</code>, if the workaround can be enabled (with no guarantees). <p>
                For a list of all members of this type, see <a href="Lucene.Net.Store.MMapDirectory~Members.html">MMapDirectory Members
                </a>.
              </p><p><a href="http://msdn.microsoft.com/en-us/library/System.Object(VS.100).aspx">System.Object</a><br />   <a href="Lucene.Net.Store.Directory.html">Directory</a><br />      <a href="Lucene.Net.Store.FSDirectory.html">FSDirectory</a><br />         <b>MMapDirectory</b></p><div class="syntax"><div>public class MMapDirectory<b> : <a href="Lucene.Net.Store.FSDirectory.html">FSDirectory</a></b></div></div><H4 class="dtH4">Thread Safety</H4><P>
					Public static (<b>Shared</b> in Visual Basic) members of this type are
					safe for multithreaded operations. Instance members are <b>not</b> guaranteed to be
					thread-safe.
				</P><h4 class="dtH4">Requirements</h4><p><b>Namespace: </b><a href="Lucene.Net.Store.html">Lucene.Net.Store</a></p><p><b>Assembly: </b>Lucene.Net (in Lucene.Net.dll)
          </p><h4 class="dtH4">See Also</h4><p><a href="Lucene.Net.Store.MMapDirectory~Members.html">MMapDirectory Members</a> | <a href="Lucene.Net.Store.html">Lucene.Net.Store Namespace</a></p><hr /><div id="footer"><p></p><p>Version: 3.0.3.0</p></div></div></body></html>