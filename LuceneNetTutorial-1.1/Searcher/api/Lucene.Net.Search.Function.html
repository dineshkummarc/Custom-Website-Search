<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html dir="LTR"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta content="history" name="save" /><meta name="vs_targetSchema" content="http://schemas.microsoft.com/intellisense/ie5" /><title>Lucene.Net.Search.Function</title><xml></xml><link rel="stylesheet" type="text/css" href="MSDN.css" /></head><body id="bodyID" class="dtBODY"><script type="text/javascript">
    	window.onload = function() {
	    	var i = window.frames["iframe_navi"];
	    	i.syncTree(document.URL);
    	}
    </script><div id="navi"><iframe src="contents.html" id="iframe_navi" name="iframe_navi"></iframe></div><div id="nsbanner"><div id="bannerrow1"><table class="bannerparthead" cellspacing="0"><tr id="hdr"><td class="runninghead">Lucene.Net</td><td class="product"></td></tr></table></div><div id="TitleRow"><h1 class="dtH1">Lucene.Net.Search.Function Namespace</h1></div></div><div id="nstext"><p><a href="Lucene.Net.Search.Function~Hierarchy.html">Namespace Hierarchy</a></p><h3 class="dtH3">Classes</h3><div class="tablediv"><table class="dtTABLE" cellspacing="0"><tr valign="top"><th width="50%">Class</th><th width="50%">Description</th></tr><tr valign="top"><td width="50%"><a href="Lucene.Net.Search.Function.ByteFieldSource.html">ByteFieldSource</a></td><td width="50%"> Expert: obtains single byte field values from the <a href="Lucene.Net.Search.FieldCache.html">FieldCache</a> using <code xmlns:ndoc="urn:ndoc-schema">getBytes()</code> and makes those values available as other numeric types, casting as needed. <p xmlns="urn:ndoc-schema"></p><font color="#FF0000" xmlns="urn:ndoc-schema"> WARNING: The status of the <b>Search.Function</b> package is experimental. The APIs introduced here might change in the future and will not be supported anymore in such a case.</font></td></tr><tr valign="top"><td width="50%"><a href="Lucene.Net.Search.Function.CustomScoreProvider.html">CustomScoreProvider</a></td><td width="50%"> An instance of this subclass should be returned by <a href="Lucene.Net.Search.Function.CustomScoreQuery.GetCustomScoreProvider.html">GetCustomScoreProvider</a>, if you want to modify the custom score calculation of a <a href="Lucene.Net.Search.Function.CustomScoreQuery.html">CustomScoreQuery</a>. <p xmlns:ndoc="urn:ndoc-schema">Since Lucene 2.9, queries operate on each segment of an Index separately, so overriding the similar (now deprecated) methods in <b>CustomScoreQuery</b> is no longer suitable, as the supplied <code>doc</code> ID is per-segment and without knowledge of the IndexReader you cannot access the document or <a href="Lucene.Net.Search.FieldCache.html">FieldCache</a>.</p> @lucene.experimental @since 2.9.2 </td></tr><tr valign="top"><td width="50%"><a href="Lucene.Net.Search.Function.CustomScoreQuery.html">CustomScoreQuery</a></td><td width="50%"> Query that sets document score as a programmatic function of several (sub) scores: <ul type="disc" xmlns:ndoc="urn:ndoc-schema"><li>the score of its subQuery (any query)</li><li>(optional) the score of its ValueSourceQuery (or queries). For most simple/convenient use cases this query is likely to be a <a href="Lucene.Net.Search.Function.FieldScoreQuery.html">FieldScoreQuery</a></li></ul> Subclasses can modify the computation by overriding <a href="Lucene.Net.Search.Function.CustomScoreQuery.GetCustomScoreProvider.html">GetCustomScoreProvider</a>. <p xmlns="urn:ndoc-schema"></p><font color="#FF0000" xmlns="urn:ndoc-schema"> WARNING: The status of the <b>Search.Function</b> package is experimental. The APIs introduced here might change in the future and will not be supported anymore in such a case.</font></td></tr><tr valign="top"><td width="50%"><a href="Lucene.Net.Search.Function.DocValues.html">DocValues</a></td><td width="50%"> Expert: represents field values as different types. Normally created via a <a href="Lucene.Net.Search.Function.ValueSource.html">ValueSuorce</a> for a particular field and reader. <p xmlns="urn:ndoc-schema"></p><font color="#FF0000" xmlns="urn:ndoc-schema"> WARNING: The status of the <b>Search.Function</b> package is experimental. The APIs introduced here might change in the future and will not be supported anymore in such a case.</font></td></tr><tr valign="top"><td width="50%"><a href="Lucene.Net.Search.Function.FieldCacheSource.html">FieldCacheSource</a></td><td width="50%"> Expert: A base class for ValueSource implementations that retrieve values for a single field from the <a href="Lucene.Net.Search.FieldCache.html">FieldCache</a>. <p xmlns="urn:ndoc-schema"></p> Fields used herein nust be indexed (doesn't matter if these fields are stored or not). <p xmlns="urn:ndoc-schema"></p> It is assumed that each such indexed field is untokenized, or at least has a single token in a document. For documents with multiple tokens of the same field, behavior is undefined (It is likely that current code would use the value of one of these tokens, but this is not guaranteed). <p xmlns="urn:ndoc-schema"></p> Document with no tokens in this field are assigned the <code xmlns:ndoc="urn:ndoc-schema">Zero</code> value. <p xmlns="urn:ndoc-schema"></p><font color="#FF0000" xmlns="urn:ndoc-schema"> WARNING: The status of the <b>Search.Function</b> package is experimental. The APIs introduced here might change in the future and will not be supported anymore in such a case.</font><p xmlns="urn:ndoc-schema"></p><b xmlns="urn:ndoc-schema">NOTE</b>: with the switch in 2.9 to segment-based searching, if <a href="Lucene.Net.Search.Function.FieldCacheSource.GetValues.html">GetValues</a> is invoked with a composite (multi-segment) reader, this can easily cause double RAM usage for the values in the FieldCache. It's best to switch your application to pass only atomic (single segment) readers to this API.<p xmlns="urn:ndoc-schema"></p></td></tr><tr valign="top"><td width="50%"><a href="Lucene.Net.Search.Function.FieldScoreQuery.html">FieldScoreQuery</a></td><td width="50%"> A query that scores each document as the value of the numeric input field. <p xmlns="urn:ndoc-schema"></p> The query matches all documents, and scores each document according to the numeric value of that field. <p xmlns="urn:ndoc-schema"></p> It is assumed, and expected, that: <ul type="disc" xmlns:ndoc="urn:ndoc-schema"><li>The field used here is indexed, and has exactly one token in every scored document.</li><li>Best if this field is un_tokenized.</li><li>That token is parsable to the selected type.</li></ul><p xmlns="urn:ndoc-schema"></p> Combining this query in a FunctionQuery allows much freedom in affecting document scores. Note, that with this freedom comes responsibility: it is more than likely that the default Lucene scoring is superior in quality to scoring modified as explained here. However, in some cases, and certainly for research experiments, this capability may turn useful. <p xmlns="urn:ndoc-schema"></p> When contructing this query, select the appropriate type. That type should match the data stored in the field. So in fact the "right" type should be selected before indexing. Type selection has effect on the RAM usage: <ul type="disc" xmlns:ndoc="urn:ndoc-schema"><li><a href="Lucene.Net.Search.Function.FieldScoreQuery.Type.BYTE.html">BYTE</a> consumes 1 * maxDocs bytes.</li><li><a href="Lucene.Net.Search.Function.FieldScoreQuery.Type.SHORT.html">SHORT</a> consumes 2 * maxDocs bytes.</li><li><a href="Lucene.Net.Search.Function.FieldScoreQuery.Type.INT.html">INT</a> consumes 4 * maxDocs bytes.</li><li><a href="Lucene.Net.Search.Function.FieldScoreQuery.Type.FLOAT.html">FLOAT</a> consumes 8 * maxDocs bytes.</li></ul><p xmlns="urn:ndoc-schema"></p><b xmlns="urn:ndoc-schema">Caching:</b> Values for the numeric field are loaded once and cached in memory for further use with the same IndexReader. To take advantage of this, it is extremely important to reuse index-readers or index-searchers, otherwise, for instance if for each query a new index reader is opened, large penalties would be paid for loading the field values into memory over and over again! <p xmlns="urn:ndoc-schema"></p><font color="#FF0000" xmlns="urn:ndoc-schema"> WARNING: The status of the <b>Search.Function</b> package is experimental. The APIs introduced here might change in the future and will not be supported anymore in such a case.</font></td></tr><tr valign="top"><td width="50%"><a href="Lucene.Net.Search.Function.FieldScoreQuery.Type.html">FieldScoreQuery.Type</a></td><td width="50%"> Type of score field, indicating how field values are interpreted/parsed. <p xmlns="urn:ndoc-schema"></p> The type selected at search search time should match the data stored in the field. Different types have different RAM requirements: <ul type="disc" xmlns:ndoc="urn:ndoc-schema"><li><a href="Lucene.Net.Search.Function.FieldScoreQuery.Type.BYTE.html">BYTE</a> consumes 1 * maxDocs bytes.</li><li><a href="Lucene.Net.Search.Function.FieldScoreQuery.Type.SHORT.html">SHORT</a> consumes 2 * maxDocs bytes.</li><li><a href="Lucene.Net.Search.Function.FieldScoreQuery.Type.INT.html">INT</a> consumes 4 * maxDocs bytes.</li><li><a href="Lucene.Net.Search.Function.FieldScoreQuery.Type.FLOAT.html">FLOAT</a> consumes 8 * maxDocs bytes.</li></ul></td></tr><tr valign="top"><td width="50%"><a href="Lucene.Net.Search.Function.FloatFieldSource.html">FloatFieldSource</a></td><td width="50%"> Expert: obtains float field values from the <a href="Lucene.Net.Search.FieldCache.html">FieldCache</a> using <code xmlns:ndoc="urn:ndoc-schema">getFloats()</code> and makes those values available as other numeric types, casting as needed. <p xmlns="urn:ndoc-schema"></p><font color="#FF0000" xmlns="urn:ndoc-schema"> WARNING: The status of the <b>Search.Function</b> package is experimental. The APIs introduced here might change in the future and will not be supported anymore in such a case.</font></td></tr><tr valign="top"><td width="50%"><a href="Lucene.Net.Search.Function.IntFieldSource.html">IntFieldSource</a></td><td width="50%"> Expert: obtains int field values from the <a href="Lucene.Net.Search.FieldCache.html">FieldCache</a> using <code xmlns:ndoc="urn:ndoc-schema">getInts()</code> and makes those values available as other numeric types, casting as needed. <p xmlns="urn:ndoc-schema"></p><font color="#FF0000" xmlns="urn:ndoc-schema"> WARNING: The status of the <b>Search.Function</b> package is experimental. The APIs introduced here might change in the future and will not be supported anymore in such a case.</font></td></tr><tr valign="top"><td width="50%"><a href="Lucene.Net.Search.Function.OrdFieldSource.html">OrdFieldSource</a></td><td width="50%"> Expert: obtains the ordinal of the field value from the default Lucene <a href="Lucene.Net.Search.FieldCache.html">Fieldcache</a> using getStringIndex(). <p xmlns="urn:ndoc-schema"></p> The native lucene index order is used to assign an ordinal value for each field value. <p xmlns="urn:ndoc-schema"></p> Field values (terms) are lexicographically ordered by unicode value, and numbered starting at 1. <p xmlns="urn:ndoc-schema"></p> Example: <br xmlns:ndoc="urn:ndoc-schema" />If there were only three field values: "apple","banana","pear" <br xmlns:ndoc="urn:ndoc-schema" />then ord("apple")=1, ord("banana")=2, ord("pear")=3 <p xmlns="urn:ndoc-schema"></p> WARNING: ord() depends on the position in an index and can thus change when other documents are inserted or deleted, or if a MultiSearcher is used. <p xmlns="urn:ndoc-schema"></p><font color="#FF0000" xmlns="urn:ndoc-schema"> WARNING: The status of the <b>Search.Function</b> package is experimental. The APIs introduced here might change in the future and will not be supported anymore in such a case.</font><p xmlns="urn:ndoc-schema"></p><b xmlns="urn:ndoc-schema">NOTE</b>: with the switch in 2.9 to segment-based searching, if <a href="Lucene.Net.Search.Function.OrdFieldSource.GetValues.html">GetValues</a> is invoked with a composite (multi-segment) reader, this can easily cause double RAM usage for the values in the FieldCache. It's best to switch your application to pass only atomic (single segment) readers to this API.<p xmlns="urn:ndoc-schema"></p></td></tr><tr valign="top"><td width="50%"><a href="Lucene.Net.Search.Function.ReverseOrdFieldSource.html">ReverseOrdFieldSource</a></td><td width="50%"> Expert: obtains the ordinal of the field value from the default Lucene <a href="Lucene.Net.Search.FieldCache.html">FieldCache</a> using getStringIndex() and reverses the order. <p xmlns="urn:ndoc-schema"></p> The native lucene index order is used to assign an ordinal value for each field value. <p xmlns="urn:ndoc-schema"></p> Field values (terms) are lexicographically ordered by unicode value, and numbered starting at 1. <br xmlns:ndoc="urn:ndoc-schema" /> Example of reverse ordinal (rord): <br xmlns:ndoc="urn:ndoc-schema" />If there were only three field values: "apple","banana","pear" <br xmlns:ndoc="urn:ndoc-schema" />then rord("apple")=3, rord("banana")=2, ord("pear")=1 <p xmlns="urn:ndoc-schema"></p> WARNING: rord() depends on the position in an index and can thus change when other documents are inserted or deleted, or if a MultiSearcher is used. <p xmlns="urn:ndoc-schema"></p><font color="#FF0000" xmlns="urn:ndoc-schema"> WARNING: The status of the <b>Search.Function</b> package is experimental. The APIs introduced here might change in the future and will not be supported anymore in such a case.</font><p xmlns="urn:ndoc-schema"></p><b xmlns="urn:ndoc-schema">NOTE</b>: with the switch in 2.9 to segment-based searching, if <a href="Lucene.Net.Search.Function.ReverseOrdFieldSource.GetValues.html">GetValues</a> is invoked with a composite (multi-segment) reader, this can easily cause double RAM usage for the values in the FieldCache. It's best to switch your application to pass only atomic (single segment) readers to this API.<p xmlns="urn:ndoc-schema"></p></td></tr><tr valign="top"><td width="50%"><a href="Lucene.Net.Search.Function.ShortFieldSource.html">ShortFieldSource</a></td><td width="50%"> Expert: obtains short field values from the <a href="Lucene.Net.Search.FieldCache.html">FieldCache</a> using <code xmlns:ndoc="urn:ndoc-schema">getShorts()</code> and makes those values available as other numeric types, casting as needed. <p xmlns="urn:ndoc-schema"></p><font color="#FF0000" xmlns="urn:ndoc-schema"> WARNING: The status of the <b>Search.Function</b> package is experimental. The APIs introduced here might change in the future and will not be supported anymore in such a case.</font></td></tr><tr valign="top"><td width="50%"><a href="Lucene.Net.Search.Function.ValueSource.html">ValueSource</a></td><td width="50%"> Expert: source of values for basic function queries. <p xmlns="urn:ndoc-schema"></p>At its default/simplest form, values - one per doc - are used as the score of that doc. <p xmlns="urn:ndoc-schema"></p>Values are instantiated as <a href="Lucene.Net.Search.Function.DocValues.html">DocValues</a> for a particular reader. <p xmlns="urn:ndoc-schema"></p>ValueSource implementations differ in RAM requirements: it would always be a factor of the number of documents, but for each document the number of bytes can be 1, 2, 4, or 8. <p xmlns="urn:ndoc-schema"></p><font color="#FF0000" xmlns="urn:ndoc-schema"> WARNING: The status of the <b>Search.Function</b> package is experimental. The APIs introduced here might change in the future and will not be supported anymore in such a case.</font></td></tr><tr valign="top"><td width="50%"><a href="Lucene.Net.Search.Function.ValueSourceQuery.html">ValueSourceQuery</a></td><td width="50%"> Expert: A Query that sets the scores of document to the values obtained from a <a href="Lucene.Net.Search.Function.ValueSource.html">ValueSource</a>. <p xmlns="urn:ndoc-schema"></p> This query provides a score for <em xmlns="urn:ndoc-schema">each and every</em> undeleted document in the index. <p xmlns="urn:ndoc-schema"></p> The value source can be based on a (cached) value of an indexed field, but it can also be based on an external source, e.g. values read from an external database. <p xmlns="urn:ndoc-schema"></p> Score is set as: Score(doc,query) = query.getBoost()<sup xmlns="urn:ndoc-schema">2</sup> * valueSource(doc). <p xmlns="urn:ndoc-schema"></p><font color="#FF0000" xmlns="urn:ndoc-schema"> WARNING: The status of the <b>Search.Function</b> package is experimental. The APIs introduced here might change in the future and will not be supported anymore in such a case.</font></td></tr></table></div></div></body></html>